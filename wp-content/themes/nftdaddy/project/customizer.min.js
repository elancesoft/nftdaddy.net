!function(e,t,a){e(function(){"use strict";var t=e("body"),a=!0,o=1,r=jQuery(window),i=(jQuery(document),!1);function c(){1==a&&jQuery(window).on("scroll.lazyLoad",function(c){i=!0;var n=jQuery(document).height()-r.height(),s=n-50*n/100;if(r.scrollTop()+s>n){if(t.hasClass("category")){var l=e(".block-ajax").data("id"),p=e(".block-ajax").data("total");o++,parseInt(o)<=parseInt(p)&&u(o,"dev_ajax_load_blog","post","category",l,"")}if(t.hasClass("page-template-template-project")){o++;p=e(".block-ajax").data("total");1==a&&parseInt(o)<=parseInt(p)&&m(o)}if(t.hasClass("single-project")){p=e(".project-detail-related").data("total");if(o++,parseInt(o)<=parseInt(p)){var d=e(".project-detail-related"),f=d.data("id"),j=d.data("page"),_=d.data("term"),v=d.data("term_id");i=!0,u(j,"dev_ajax_project_related","project",_,v,f)}}}})}(jQuery(window).load(function(e){c()}),e(document).ready(function(){var t={markup:'<div class="mfp-iframe-scaler"><div class="mfp-close"></div><iframe class="mfp-iframe" frameborder="0" allowfullscreen></iframe><div class="mfp-title">Some caption</div></div>'};e(".sticky-menu-hot-video, .banner__video").magnificPopup({type:"iframe",iframe:t}),e(".banner__video-icon").magnificPopup({type:"iframe",iframe:t,callbacks:{open:function(){e(".banner-slider").slick("slickPause")},close:function(){e(".banner-slider").slick("slickPlay")}}}),e(".sticky-meny-project-list, .sticky-slider-close").click(function(t){e(".sticky-slider").toggleClass("show")})}),t.hasClass("category"))&&u(1,"dev_ajax_load_blog","post","category",e(".block-ajax").data("id"),"");(e("#in-project-type").on("change",function(){e(this).val().indexOf("project")>-1?(e(".frm_unit_price").html("($/m2)"),e(".frm_unit_price").show(),e(".property-radio").hide()):(e(".frm_unit_price").html("($)"),e(".frm_unit_price").show(),e(".property-radio").show())}),e("#in-project-city").on("change",function(){u("project-district","dev_ajax_district_city","project","location",e(this).val(),"")}),e("#project-district").on("change",function(){e(this).val()}),t.hasClass("page-template-template-home"))&&u("project-district","dev_ajax_district_city","project","location",e("#in-project-city").val(),"");t.hasClass("page-template-template-project")&&u("project-district","dev_ajax_district_city","project","location",e("#in-project-city").val(),"");if(t.hasClass("single-project")){var n=e(".project-detail-related"),s=n.data("id"),l=n.data("page"),p=n.data("term"),d=n.data("term_id");i=!0,u(l,"dev_ajax_project_related","project",p,d,s)}if(t.hasClass("page-template-template-project")){i=!1;p="type";o=1;d=e(".project-type a.active").data("term_id");m(1),e(".project-type a").on("click",function(t){t.preventDefault(),e(".project-type a").removeClass("active"),e(this).data("name").indexOf("project")>-1?(e(".frm_unit_price").html("($/m2)"),e(".frm_unit_price").show(),e(".group-room").hide()):(e(".frm_unit_price").html("($)"),e(".frm_unit_price").show(),e(".group-room").show()),e(this).addClass("active"),i=!1,o=1,a=!0,m(1)}),e(".btn-project-filter").on("click",function(e){e.preventDefault(),i=!1,o=1,m(1)}),e(".form__reset").click(function(){i=!1,o=1,m(1)})}function m(t){var a=e(".project-type a.active").data("term_id"),o=e(".project-city").val(),r=e(".project-district").val(),i=e(".project-direction").val(),c=e("#in-price-from").val(),n=e("#in-price-to").val(),s=e("#in-keyword").val(),l=e("#in-project-room").val(),p=e("#project-contructor").val(),d=e(".in-project-property-type"),m="";d.each(function(){e(this).is(":checked")&&(m=e(this).val())});var f={};f.text=s,f.type=a,f.city=o,f.district=r,f.direction=i,f.price_from=c,f.price_to=n,f.room=l,f.contructor=p,f.property=m,u(t,"dev_ajax_project_filter","project","","",f)}function u(t,o,r,c,n,s){var l=dev_ajax.ajaxurl;if("project-district"===t){t=1;var p=e(".project-district");i=!1}else if("dev_ajax_project_related"==o)p=e(".project-detail-related");else p=e(".block-ajax");e.ajax({type:"post",url:l,data:{action:o,dataType:"json",page:t,postType:r,taxonomy:c,taxonomyID:n,data:s},beforeSend:function(){t>1&&e(".icon-loading").show()},success:function(t){var r=JSON.parse(t),c="";null!==r.data&&(c=r.data),0===r.post_count&&(a=!1),r.post_count<=4&&"dev_ajax_project_filter"==o&&(a=!1),p.removeClass("loading"),p.attr("data-total",r.max_page),e(".icon-loading").hide(),i?r.post_count>0&&p.append(c):p.html(c)},error:function(t){e(".icon-loading").hide(),console.log(t)}})}e(".register-btn").click(function(t){t.preventDefault();var a={},o=e(".user-message"),r=e(".register-form"),i=dev_ajax.ajaxurl;a.username=e("#register-name-dropdown").val(),a.phone=e("#register-lastname-dropdown").val(),a.email=e("#register-email-dropdown").val(),a.password=e("#register-password-dropdown").val(),e.ajax({type:"post",url:i,data:{action:"dev_ajax_register_user",dataType:"json",data:a},beforeSend:function(){},success:function(e){var t=JSON.parse(e),a=t.error,i=t.message;o.html(i),""!==a&&r.hide()},error:function(t){e(".icon-loading").hide(),console.log(t)}})}),e(".login-btn").click(function(t){t.preventDefault();var a=dev_ajax.ajaxurl,o=e(".user-message"),r=(e(".login-form"),{});r.username=e("#login-username-dropdown").val(),r.password=e("#login-password-dropdown").val(),r.remember=e("#remember-in-dropdown").val(),e.ajax({type:"post",url:a,data:{action:"dev_ajax_login_user",dataType:"json",data:r},beforeSend:function(){},success:function(e){var t=JSON.parse(e);o.html(t.message),""==t.error?(o.css("color","blue"),location.reload()):o.css("color","red")},error:function(t){e(".icon-loading").hide(),console.log(t)}})})})}(jQuery);
